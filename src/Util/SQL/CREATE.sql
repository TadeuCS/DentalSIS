CREATE DATABASE IF NOT EXISTS DENTAL;
USE DENTAL;
CREATE TABLE TIPO_USUARIO (CODTIPO_USUARIO int(10) NOT NULL AUTO_INCREMENT, DESCRICAO varchar(255) NOT NULL UNIQUE, PRIMARY KEY (CODTIPO_USUARIO));
CREATE TABLE USUARIO (CODUSUARIO int(10) NOT NULL, USUARIO varchar(100) NOT NULL UNIQUE, SENHA varchar(80) NOT NULL, ATIVO varchar(1) NOT NULL, CODTIPO_USUARIO int(10) NOT NULL, PRIMARY KEY (CODUSUARIO));
CREATE TABLE LANCAMENTO_CHEQUE (CODLANCAMENTOCHEQUE int(10) NOT NULL AUTO_INCREMENT, DATA_EMISSAO date NOT NULL, DATA_ENTRADA date NOT NULL, DATA_VENCIMENTO date NOT NULL, DATA_BAIXA date, DATA_ESTORNO date, NUMERO int(10) NOT NULL, VALOR decimal(19, 2) NOT NULL, SACADO varchar(255) NOT NULL, CODCLIENTE int(10) NOT NULL, CODLANCAMENTOBANCO int(10), PRIMARY KEY (CODLANCAMENTOCHEQUE));
CREATE TABLE CARGO (CODCARGO int(10) NOT NULL AUTO_INCREMENT, DESCRICAO varchar(150) NOT NULL UNIQUE, PRIMARY KEY (CODCARGO));
CREATE TABLE FUNCIONARIO (CODFUNCIONARIO int(10) NOT NULL, CODENDERECO int(10) NOT NULL, CODCARGO int(10) NOT NULL, PRIMARY KEY (CODFUNCIONARIO));
CREATE TABLE TIPO_TELEFONE (CODTIPOTELEFONE int(10) NOT NULL AUTO_INCREMENT, DESCRICAO varchar(255) NOT NULL, PRIMARY KEY (CODTIPOTELEFONE));
CREATE TABLE TELEFONE (CODTELEFONE int(10) NOT NULL AUTO_INCREMENT, NUMERO varchar(20) NOT NULL UNIQUE, CODTIPOTELEFONE int(10) NOT NULL, CODCLIENTE int(10), CODFORNECEDOR int(10), CODFUNCIONARIO int(10), PRIMARY KEY (CODTELEFONE));
CREATE TABLE PESSOA (CODPESSOA int(10) NOT NULL AUTO_INCREMENT, NOME varchar(255) NOT NULL, CPF_CNPJ varchar(16) NOT NULL UNIQUE, CODENDERECO int(10) NOT NULL, PRIMARY KEY (CODPESSOA));
CREATE TABLE FORNECEDOR (CODFORNECEDOR int(10) NOT NULL, PRIMARY KEY (CODFORNECEDOR));
CREATE TABLE PAGAMENTO (CODPAGAMENTO int(10) NOT NULL AUTO_INCREMENT, DOCUMENTO varchar(50) NOT NULL, DATA_EMISSAO date NOT NULL, DATA_VENCIMENTO date NOT NULL, DATA_PAGAMENTO date, VALOR decimal(19, 2) NOT NULL, DESCONTO decimal(19, 2) DEFAULT 0 NOT NULL, JUROS decimal(19, 2) DEFAULT 0 NOT NULL, CODFORNECEDOR int(10) NOT NULL, CODSTATUS int(10) NOT NULL, PRIMARY KEY (CODPAGAMENTO));
CREATE TABLE PARAMETRO (CODPARAMETRO int(10) NOT NULL AUTO_INCREMENT, TAXA_JURO_REC float NOT NULL, PRIMARY KEY (CODPARAMETRO));
CREATE TABLE LANCAMENTO_BANCO (CODLANCAMENTOBANCO int(10) NOT NULL AUTO_INCREMENT, DATA_LANCAMENTO date NOT NULL, DESCRICAO varchar(100) NOT NULL, VALOR decimal(19, 2) NOT NULL, CONCILIADO varchar(1) DEFAULT 'N' NOT NULL, CODTIPOLANCAMENTO int(10) NOT NULL, CODCONTA int(11) NOT NULL, CODPAGAMENTO int(10), CODRECEBIMENTO int(10) NOT NULL, PRIMARY KEY (CODLANCAMENTOBANCO));
CREATE TABLE CONTA (CODCONTA int(11) NOT NULL AUTO_INCREMENT, NUMERO varchar(20) NOT NULL UNIQUE, CODAGENCIA int(10) NOT NULL, PRIMARY KEY (CODCONTA));
CREATE TABLE AGENCIA (CODAGENCIA int(10) NOT NULL AUTO_INCREMENT, DESCRICAO varchar(100) NOT NULL UNIQUE, CODBANCO int(10) NOT NULL, PRIMARY KEY (CODAGENCIA));
CREATE TABLE BANCO (CODBANCO int(10) NOT NULL AUTO_INCREMENT, DESCRICAO varchar(100) NOT NULL UNIQUE, PRIMARY KEY (CODBANCO));
CREATE TABLE TIPO_LANCAMENTO (CODTIPOLANCAMENTO int(10) NOT NULL AUTO_INCREMENT, DESCRICAO varchar(20) NOT NULL UNIQUE, PRIMARY KEY (CODTIPOLANCAMENTO));
CREATE TABLE LANCAMENTO_CAIXA (CODLANCAMENTOCAIXA int(10) NOT NULL AUTO_INCREMENT, DATA_LANCAMENTO datetime NOT NULL, DESCRICAO varchar(255) NOT NULL, VALOR numeric(19, 0) NOT NULL, CODTIPOLANCAMENTO int(10) NOT NULL, CODPAGAMENTO int(10), CODRECEBIMENTO int(10) NOT NULL, PRIMARY KEY (CODLANCAMENTOCAIXA));
CREATE TABLE CARTAO (CODCARTAO int(10) NOT NULL AUTO_INCREMENT, DESCRICAO varchar(150) NOT NULL UNIQUE, TAXA float NOT NULL, CODTIPOLANCAMENTO int(10) NOT NULL, PRIMARY KEY (CODCARTAO));
CREATE TABLE ATENDIMENTO_SERVICO (CODATENDIMENTOSERVICO int(10) NOT NULL AUTO_INCREMENT, CODSERVICO int(10) NOT NULL, CODATENDIMENTO int(10) NOT NULL, PRIMARY KEY (CODATENDIMENTOSERVICO));
CREATE TABLE SERVICO (CODSERVICO int(10) NOT NULL AUTO_INCREMENT, DESCRICAO varchar(150) NOT NULL UNIQUE, VALOR decimal(19, 2) NOT NULL, PRIMARY KEY (CODSERVICO));
CREATE TABLE ATENDIMENTO (CODATENDIMENTO int(10) NOT NULL AUTO_INCREMENT, DATA_AGENDAMENTO datetime NOT NULL, DATA_INICIO datetime NULL, DATA_FIM datetime NULL, DATA_RETORNO datetime NULL, OBSERVACAO varchar(255), CODCLIENTE int(10) NOT NULL, CODDOUTOR int(10) NOT NULL, PRIMARY KEY (CODATENDIMENTO));
CREATE TABLE STATUS (CODSTATUS int(10) NOT NULL AUTO_INCREMENT, DESCRICAO varchar(255) NOT NULL UNIQUE, PRIMARY KEY (CODSTATUS));
CREATE TABLE RECEBIMENTO (CODRECEBIMENTO int(10) NOT NULL AUTO_INCREMENT, DOCUMENTO varchar(50) NOT NULL, DATA_EMISSAO date NOT NULL, DATA_VENCIMENTO date NOT NULL, DATA_PAGAMENTO int(10), VALOR decimal(19, 2) NOT NULL, DESCONTO decimal(19, 2) DEFAULT 0 NOT NULL, JUROS decimal(19, 2) DEFAULT 0 NOT NULL, CODSTATUS int(10) NOT NULL, CODATENDIMENTO int(10) NOT NULL, CARTAOCODCARTAO int(10), PRIMARY KEY (CODRECEBIMENTO));
CREATE TABLE ESTADO (CODESTADO int(10) NOT NULL AUTO_INCREMENT, SIGLA varchar(2) NOT NULL UNIQUE, DESCRICAO varchar(100) NOT NULL, PRIMARY KEY (CODESTADO));
CREATE TABLE CIDADE (CODCIDADE int(10) NOT NULL AUTO_INCREMENT, DESCRICAO varchar(255) NOT NULL UNIQUE, CODESTADO int(10) NOT NULL, PRIMARY KEY (CODCIDADE));
CREATE TABLE ENDERECO (CODENDERECO int(10) NOT NULL AUTO_INCREMENT, CEP varchar(9) NOT NULL, BAIRRO varchar(255) NOT NULL, RUA varchar(255) NOT NULL, COMPLEMENTO varchar(150), NUMERO int(10) NOT NULL, CODCIDADE int(10) NOT NULL, PRIMARY KEY (CODENDERECO));
CREATE TABLE CLIENTE (CODCLIENTE int(10) NOT NULL, EMAIL varchar(255), DATA_NASCIMENTO date, PRIMARY KEY (CODCLIENTE));
ALTER TABLE USUARIO ADD INDEX FKUSUARIO14843 (CODTIPO_USUARIO), ADD CONSTRAINT FKUSUARIO14843 FOREIGN KEY (CODTIPO_USUARIO) REFERENCES TIPO_USUARIO (CODTIPO_USUARIO);
ALTER TABLE CARTAO ADD INDEX FKCARTAO720036 (CODTIPOLANCAMENTO), ADD CONSTRAINT FKCARTAO720036 FOREIGN KEY (CODTIPOLANCAMENTO) REFERENCES TIPO_LANCAMENTO (CODTIPOLANCAMENTO);
ALTER TABLE LANCAMENTO_CAIXA ADD INDEX FKLANCAMENTO54019 (CODRECEBIMENTO), ADD CONSTRAINT FKLANCAMENTO54019 FOREIGN KEY (CODRECEBIMENTO) REFERENCES RECEBIMENTO (CODRECEBIMENTO);
ALTER TABLE LANCAMENTO_BANCO ADD INDEX FKLANCAMENTO973372 (CODRECEBIMENTO), ADD CONSTRAINT FKLANCAMENTO973372 FOREIGN KEY (CODRECEBIMENTO) REFERENCES RECEBIMENTO (CODRECEBIMENTO);
ALTER TABLE LANCAMENTO_BANCO ADD INDEX FKLANCAMENTO429078 (CODCONTA), ADD CONSTRAINT FKLANCAMENTO429078 FOREIGN KEY (CODCONTA) REFERENCES CONTA (CODCONTA);
ALTER TABLE LANCAMENTO_BANCO ADD INDEX FKLANCAMENTO582896 (CODTIPOLANCAMENTO), ADD CONSTRAINT FKLANCAMENTO582896 FOREIGN KEY (CODTIPOLANCAMENTO) REFERENCES TIPO_LANCAMENTO (CODTIPOLANCAMENTO);
ALTER TABLE LANCAMENTO_CAIXA ADD INDEX FKLANCAMENTO502250 (CODTIPOLANCAMENTO), ADD CONSTRAINT FKLANCAMENTO502250 FOREIGN KEY (CODTIPOLANCAMENTO) REFERENCES TIPO_LANCAMENTO (CODTIPOLANCAMENTO);
ALTER TABLE CONTA ADD INDEX FKCONTA251155 (CODAGENCIA), ADD CONSTRAINT FKCONTA251155 FOREIGN KEY (CODAGENCIA) REFERENCES AGENCIA (CODAGENCIA);
ALTER TABLE AGENCIA ADD INDEX FKAGENCIA513530 (CODBANCO), ADD CONSTRAINT FKAGENCIA513530 FOREIGN KEY (CODBANCO) REFERENCES BANCO (CODBANCO);
ALTER TABLE ATENDIMENTO_SERVICO ADD INDEX FKATENDIMENT475847 (CODATENDIMENTO), ADD CONSTRAINT FKATENDIMENT475847 FOREIGN KEY (CODATENDIMENTO) REFERENCES ATENDIMENTO (CODATENDIMENTO);
ALTER TABLE ATENDIMENTO_SERVICO ADD INDEX FKATENDIMENT481684 (CODSERVICO), ADD CONSTRAINT FKATENDIMENT481684 FOREIGN KEY (CODSERVICO) REFERENCES SERVICO (CODSERVICO);
ALTER TABLE ATENDIMENTO ADD INDEX FKATENDIMENT382556 (CODCLIENTE), ADD CONSTRAINT FKATENDIMENT382556 FOREIGN KEY (CODCLIENTE) REFERENCES CLIENTE (CODCLIENTE);
ALTER TABLE RECEBIMENTO ADD INDEX FKRECEBIMENT975025 (CODSTATUS), ADD CONSTRAINT FKRECEBIMENT975025 FOREIGN KEY (CODSTATUS) REFERENCES STATUS (CODSTATUS);
ALTER TABLE CIDADE ADD INDEX FKCIDADE570081 (CODESTADO), ADD CONSTRAINT FKCIDADE570081 FOREIGN KEY (CODESTADO) REFERENCES ESTADO (CODESTADO);
ALTER TABLE ENDERECO ADD INDEX FKENDERECO485117 (CODCIDADE), ADD CONSTRAINT FKENDERECO485117 FOREIGN KEY (CODCIDADE) REFERENCES CIDADE (CODCIDADE);
ALTER TABLE PESSOA ADD INDEX FKPESSOA705668 (CODENDERECO), ADD CONSTRAINT FKPESSOA705668 FOREIGN KEY (CODENDERECO) REFERENCES ENDERECO (CODENDERECO);
ALTER TABLE ATENDIMENTO ADD INDEX FKATENDIMENT652268 (CODDOUTOR), ADD CONSTRAINT FKATENDIMENT652268 FOREIGN KEY (CODDOUTOR) REFERENCES FUNCIONARIO (CODFUNCIONARIO);
ALTER TABLE FUNCIONARIO ADD INDEX FKFUNCIONARI338794 (CODCARGO), ADD CONSTRAINT FKFUNCIONARI338794 FOREIGN KEY (CODCARGO) REFERENCES CARGO (CODCARGO);
ALTER TABLE TELEFONE ADD INDEX FKTELEFONE788396 (CODFUNCIONARIO), ADD CONSTRAINT FKTELEFONE788396 FOREIGN KEY (CODFUNCIONARIO) REFERENCES FUNCIONARIO (CODFUNCIONARIO);
ALTER TABLE FUNCIONARIO ADD INDEX FKFUNCIONARI25734 (CODENDERECO), ADD CONSTRAINT FKFUNCIONARI25734 FOREIGN KEY (CODENDERECO) REFERENCES ENDERECO (CODENDERECO);
ALTER TABLE FUNCIONARIO ADD INDEX FKFUNCIONARI373624 (CODFUNCIONARIO), ADD CONSTRAINT FKFUNCIONARI373624 FOREIGN KEY (CODFUNCIONARIO) REFERENCES PESSOA (CODPESSOA);
ALTER TABLE PAGAMENTO ADD INDEX FKPAGAMENTO769476 (CODSTATUS), ADD CONSTRAINT FKPAGAMENTO769476 FOREIGN KEY (CODSTATUS) REFERENCES STATUS (CODSTATUS);
ALTER TABLE TELEFONE ADD INDEX FKTELEFONE986581 (CODFORNECEDOR), ADD CONSTRAINT FKTELEFONE986581 FOREIGN KEY (CODFORNECEDOR) REFERENCES FORNECEDOR (CODFORNECEDOR);
ALTER TABLE TELEFONE ADD INDEX FKTELEFONE97107 (CODCLIENTE), ADD CONSTRAINT FKTELEFONE97107 FOREIGN KEY (CODCLIENTE) REFERENCES CLIENTE (CODCLIENTE);
ALTER TABLE TELEFONE ADD INDEX FKTELEFONE468215 (CODTIPOTELEFONE), ADD CONSTRAINT FKTELEFONE468215 FOREIGN KEY (CODTIPOTELEFONE) REFERENCES TIPO_TELEFONE (CODTIPOTELEFONE);
ALTER TABLE RECEBIMENTO ADD INDEX FKRECEBIMENT173062 (CODATENDIMENTO), ADD CONSTRAINT FKRECEBIMENT173062 FOREIGN KEY (CODATENDIMENTO) REFERENCES ATENDIMENTO (CODATENDIMENTO);
ALTER TABLE PAGAMENTO ADD INDEX FKPAGAMENTO636686 (CODFORNECEDOR), ADD CONSTRAINT FKPAGAMENTO636686 FOREIGN KEY (CODFORNECEDOR) REFERENCES FORNECEDOR (CODFORNECEDOR);
ALTER TABLE FORNECEDOR ADD INDEX FKFORNECEDOR964868 (CODFORNECEDOR), ADD CONSTRAINT FKFORNECEDOR964868 FOREIGN KEY (CODFORNECEDOR) REFERENCES PESSOA (CODPESSOA);
ALTER TABLE CLIENTE ADD INDEX FKCLIENTE333300 (CODCLIENTE), ADD CONSTRAINT FKCLIENTE333300 FOREIGN KEY (CODCLIENTE) REFERENCES PESSOA (CODPESSOA);
ALTER TABLE LANCAMENTO_BANCO ADD INDEX FKLANCAMENTO148789 (CODPAGAMENTO), ADD CONSTRAINT FKLANCAMENTO148789 FOREIGN KEY (CODPAGAMENTO) REFERENCES PAGAMENTO (CODPAGAMENTO);
ALTER TABLE LANCAMENTO_CAIXA ADD INDEX FKLANCAMENTO68143 (CODPAGAMENTO), ADD CONSTRAINT FKLANCAMENTO68143 FOREIGN KEY (CODPAGAMENTO) REFERENCES PAGAMENTO (CODPAGAMENTO);
ALTER TABLE USUARIO ADD INDEX FKUSUARIO533222 (CODUSUARIO), ADD CONSTRAINT FKUSUARIO533222 FOREIGN KEY (CODUSUARIO) REFERENCES PESSOA (CODPESSOA);
ALTER TABLE LANCAMENTO_CHEQUE ADD INDEX FKLANCAMENTO390029 (CODLANCAMENTOBANCO), ADD CONSTRAINT FKLANCAMENTO390029 FOREIGN KEY (CODLANCAMENTOBANCO) REFERENCES LANCAMENTO_BANCO (CODLANCAMENTOBANCO);
ALTER TABLE LANCAMENTO_CHEQUE ADD INDEX FKLANCAMENTO255441 (CODCLIENTE), ADD CONSTRAINT FKLANCAMENTO255441 FOREIGN KEY (CODCLIENTE) REFERENCES CLIENTE (CODCLIENTE);
ALTER TABLE RECEBIMENTO ADD INDEX FKRECEBIMENT780465 (CARTAOCODCARTAO), ADD CONSTRAINT FKRECEBIMENT780465 FOREIGN KEY (CARTAOCODCARTAO) REFERENCES CARTAO (CODCARTAO);


